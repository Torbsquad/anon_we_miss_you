<script src="/axios.js"></script>
<link href="./style.css" rel="stylesheet" />
<div id="mainContainer">
  List of everyone that ever followed <a href="https://twitter.com/VonFriedricht">@VonFriedricht</a>
  <br />
  <span class="sidenote">The main point of this site is to alert me if a follower gets suspended.</span>

  <br /><br />
</div>
<script>
  let mainContainer = document.getElementById('mainContainer')
  function _arrayBufferToBase64(buffer) {
    var binary = ''
    var bytes = new Uint8Array(buffer)
    var len = bytes.byteLength
    for (var i = 0; i < len; i++) {
      binary += String.fromCharCode(bytes[i])
    }
    return window.btoa(binary)
  }
  function round(x,digits){
    return Math.round(Math.pow(10,digits)*x)/Math.pow(10,digits)
  }
  async function main() {
    let e = await axios.get('https://api.vnft.cc/twitter/followers2')
    for (let data of e.data) {
      var entry = document.createElement('div')
      entry.className = 'entry'
      var content = document.createElement('div')
      var image = document.createElement('img')
      image.src = 'data:image/png;base64,' + _arrayBufferToBase64(data.picture.data)

      let entryContent = `<a href="https://twitter.com/${data.screen_name}">${data.name}</a> <a class="sidenote" href="https://twitter.com/${data.screen_name}">@${data.screen_name}</a>
        Followers: ${data.followers}
        Following: ${data.following}
        Follow-Rate: ${round(data.followers / data.following, 2)}
        id: ${data.follower_id}
      `.replace(/\n/g,"<br />")

      content.innerHTML = entryContent

      entry.appendChild(image)
      entry.appendChild(content)
      mainContainer.appendChild(entry)
    }
    console.log(e.data)
  }
  main()
</script>
