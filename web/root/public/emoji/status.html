<link rel="stylesheet" type="text/css" href="/style.css" />
<script src="/axios.js"></script>

<pre>
<p>Emojicount: <span id="emojicount"></span></p>
<p>Open Channels: <span id="openchannels"></span></p>
</pre>

<script>
  
  function openchannelsDisplay(channels){
    for( let i in channels ){
      let channel = channels[i]
      channel.last_fetch = ( new Date() - new Date(channel.last_fetch) ) / 1000 + "s ago"
    }
    return JSON.stringify(channels, null, 2)
  }
  
  const emojicount = document.getElementById('emojicount')
  const openchannels = document.getElementById('openchannels')

  async function main() {
    
    axios
      .get('https://api.vnft.cc/emoji/count')
      .then(e => (emojicount.innerHTML = e.data))
    
    axios
      .get('https://api.vnft.cc/emoji/status/open')
      .then(e => (openchannels.innerHTML = openchannelsDisplay(e.data)))
    
  }
  
  main()
  setInterval(main,10*1000)
  
</script>
