<style>
html,
body {
  background: black;
  color: white;
  font-family: Arial, Helvetica, sans-serif;
}
table,
tr,
td {
  border-collapse: collapse;
  padding: 3px;
  border: 1px solid white;
}
.types {
  min-height: 24px;
}
.effectivity {
  text-align: center;
}
</style>

<table id="effectivity"></table>
<table id="dualtype"></table>

<script>
var effectivityTable = document.getElementById("effectivity");
var dualtypeTable = document.getElementById("dualtype");

// effectivity-table
// effectivity.attack.defend
effectivity = {};

types = [
  { type: "Normal", color: "brown" },
  { type: "Fire", color: "red" },
  { type: "Water", color: "blue" },
  { type: "Electric", color: "yellow" },
  { type: "Grass", color: "green" },
  { type: "Ice", color: "lightblue" },
  { type: "Fighting", color: "brown" },
  { type: "Poison", color: "purple" },
  { type: "Ground", color: "brown" },
  { type: "Flying", color: "lightblue" },
  { type: "Psychic", color: "pink" },
  { type: "Bug", color: "cyan" },
  { type: "Rock", color: "brown" },
  { type: "Ghost", color: "grey" },
  { type: "Dragon", color: "darkblue" },
  { type: "Dark", color: "darkgrey" },
  { type: "Steel", color: "lightgrey" },
  { type: "Fairy", color: "Pink" }
];

effectmap = [
  [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 0, 2, 2, 1, 2],
  [2, 1, 1, 2, 4, 4, 2, 2, 2, 2, 2, 4, 1, 2, 1, 2, 4, 2],
  [2, 4, 1, 2, 1, 2, 2, 2, 4, 2, 2, 2, 4, 2, 1, 2, 2, 2],
  [2, 2, 4, 1, 1, 2, 2, 2, 0, 4, 2, 2, 2, 2, 1, 2, 2, 2],
  [2, 1, 4, 2, 1, 2, 2, 1, 4, 1, 2, 1, 4, 2, 1, 2, 1, 2],
  [2, 1, 1, 2, 4, 1, 2, 2, 4, 4, 2, 2, 2, 2, 4, 2, 1, 2],
  [4, 2, 2, 2, 2, 4, 2, 1, 2, 1, 1, 1, 4, 0, 2, 4, 4, 1],
  [2, 2, 2, 2, 4, 2, 2, 1, 1, 2, 2, 2, 1, 1, 2, 2, 0, 4],
  [2, 4, 2, 4, 1, 2, 2, 4, 2, 0, 2, 1, 4, 2, 2, 2, 4, 2],
  [2, 2, 2, 1, 4, 2, 4, 2, 2, 2, 2, 4, 1, 2, 2, 2, 1, 2],
  [2, 2, 2, 2, 2, 2, 4, 4, 2, 2, 1, 2, 2, 2, 2, 0, 1, 2],
  [2, 1, 2, 2, 4, 2, 1, 1, 2, 1, 4, 2, 2, 1, 2, 4, 1, 1],
  [2, 4, 2, 2, 2, 4, 1, 2, 1, 4, 2, 4, 2, 2, 2, 2, 1, 2],
  [0, 2, 2, 2, 2, 2, 2, 2, 2, 2, 4, 2, 2, 4, 2, 1, 2, 2],
  [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 4, 2, 1, 0],
  [2, 2, 2, 2, 2, 2, 1, 2, 2, 2, 4, 2, 2, 4, 2, 1, 2, 1],
  [2, 1, 1, 1, 2, 4, 2, 2, 2, 2, 2, 2, 4, 2, 2, 2, 1, 4],
  [2, 1, 2, 2, 2, 2, 4, 1, 2, 2, 2, 2, 2, 2, 4, 4, 1, 2]
].map(e => e.map(f => f / 2));

effectcolor = {
  "0": "#3d3d3d",
  "0.5": "#e50d0d",
  "1": "#6cba71",
  "2": "#098b29"
};

for (var attackIndex in types) {
  var attackType = types[attackIndex].type;
  effectivity[attackType] = {};
  for (var defendIndex in types) {
    let defendType = types[defendIndex].type;
    effectivity[attackType][defendType] = effectmap[attackIndex][defendIndex];
  }
}

// defenders names; the very first row of table
var row = document.createElement("tr");
let cell = document.createElement("td");
row.appendChild(cell);
for (let defender in effectivity) {
  let cell = document.createElement("td");
  let img = document.createElement("img");
  img.className = "types";
  img.src = `./img/${defender.toLocaleLowerCase()}.png`;
  cell.appendChild(img);
  row.appendChild(cell);
}
effectivityTable.appendChild(row);

for (var attacker in effectivity) {
  // attackers names; the first cell of the row
  var row = document.createElement("tr");
  let cell = document.createElement("td");
  let img = document.createElement("img");
  img.className = "types";
  img.src = `./img/${attacker.toLocaleLowerCase()}.png`;
  cell.appendChild(img);
  row.appendChild(cell);

  // 0, 0.5, 1, 2 of the tables; the effectivity of attacker to defender
  for (var defender in effectivity) {
    let effect = effectivity[attacker][defender];
    let cell = document.createElement("td");
    cell.className = "effectivity";
    cell.style.background = effectcolor[effect];
    cell.innerHTML = effect;
    row.appendChild(cell);
  }

  effectivityTable.appendChild(row);
}


// dualtype table
// top left
let tr = document.createElement("tr")
let td = document.createElement("td")
tr.appendChild(td)
dualtypeTable.appendChild(tr)

for (var type of types) {
  // init type-rows
  let tr = document.createElement("tr")
  let td = document.createElement("td")
  let img = document.createElement("img")
  let imageUrl = `./img/${type.type.toLocaleLowerCase()}.png`
  img.className = "types";
  img.src = imageUrl
  td.appendChild(img)
  tr.appendChild(td)
  dualtypeTable.appendChild(tr)
}

dualtypeSelection = ["Normal","Flying"]
  
for (var type of dualtypeSelection) {
  // init type-rows
  let tr = document.createElement("tr")
  let td = document.createElement("td")
  let img = document.createElement("img")
  let imageUrl = `./img/${type.type.toLocaleLowerCase()}.png`
  img.className = "types";
  img.src = imageUrl
  td.appendChild(img)
  tr.appendChild(td)
  dualtypeTable.appendChild(tr)
}

  /*
  let td = document.createElement("td")

  tr.appendChild(td)
    
  let img = document.createElement("img")
  let imageUrl = `./img/${type.type.toLocaleLowerCase()}.png`
  img.className = "types";
  img.src = imageUrl
  
  td.appendChild(img)
  
  */
  
resetDualtype(dualtypeTable,0)
resetDualtype(dualtypeTable,1)
</script>
